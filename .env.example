# =============================================================================
# ARGUS E2E TESTING AGENT - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to git (it contains secrets)
# =============================================================================

# =============================================================================
# OPENROUTER - THE ONLY API KEY YOU NEED
# =============================================================================
# OpenRouter provides access to 300+ models via ONE API key:
# - DeepSeek, Claude, GPT, Llama, Qwen, Gemini, and more
# - No markup on provider pricing (just 5.5% platform fee)
# - Automatic failover between providers
# - Get your key at: https://openrouter.ai/keys

OPENROUTER_API_KEY=sk-or-v1-...

# =============================================================================
# SUPABASE (Database & Auth)
# =============================================================================
# Create a project at: https://supabase.com/dashboard

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=eyJhbGci...
SUPABASE_ANON_KEY=eyJhbGci...

# PostgreSQL connection (for LangGraph persistence)
DATABASE_URL=postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres

# =============================================================================
# CLERK (Dashboard Authentication)
# =============================================================================
# Configure at: https://dashboard.clerk.com

CLERK_JWKS_URL=https://your-instance.clerk.accounts.dev/.well-known/jwks.json

# =============================================================================
# BROWSER POOL (Vultr K8s - RECOMMENDED)
# =============================================================================
# Primary browser automation infrastructure - scalable, cost-effective
# See browser-pool/kubernetes/KEDA-DEPLOYMENT-GUIDE.md for setup
#
# Priority order:
# 1. BROWSER_POOL_URL (Vultr K8s) - Production, scalable
# 2. BROWSER_WORKER_URL (Cloudflare) - Legacy fallback
# 3. http://localhost:8080 - Local development

BROWSER_POOL_URL=https://browser-pool.your-domain.com
BROWSER_POOL_JWT_SECRET=generate-with-openssl-rand-hex-64

# Timeouts and retries
BROWSER_TIMEOUT_MS=60000
BROWSER_RETRY_COUNT=3

# Claude Computer Use fallback (when DOM execution fails)
VISION_FALLBACK_ENABLED=true

# =============================================================================
# BROWSER AUTOMATION - LEGACY (Cloudflare Worker)
# =============================================================================
# Fallback if BROWSER_POOL_URL is not set
# Deploy your own: cd cloudflare-worker && npm run deploy

BROWSER_WORKER_URL=https://argus-api.samuelvinay-kumar.workers.dev

# =============================================================================
# CLOUDFLARE STORAGE (Optional - for artifacts)
# =============================================================================

CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_WORKER_URL=https://your-worker.workers.dev  # Key Vault encryption service URL
CLOUDFLARE_R2_BUCKET=argus-artifacts

# R2 S3-compatible credentials for presigned URLs (optional but recommended)
# Generate these at: Cloudflare Dashboard > R2 > Manage R2 API Tokens
CLOUDFLARE_R2_ACCESS_KEY_ID=
CLOUDFLARE_R2_SECRET_ACCESS_KEY=
CLOUDFLARE_R2_PRESIGNED_URL_EXPIRY=3600

# =============================================================================
# COST CONTROLS
# =============================================================================

COST_LIMIT_PER_RUN=10.00
COST_LIMIT_PER_TEST=1.00

# =============================================================================
# EXECUTION SETTINGS
# =============================================================================

PARALLEL_TESTS=1
RETRY_FAILED_TESTS=2
SELF_HEAL_ENABLED=true
SELF_HEAL_CONFIDENCE_THRESHOLD=0.8

# =============================================================================
# SERVER SETTINGS
# =============================================================================

SERVER_HOST=0.0.0.0
SERVER_PORT=8000
ARGUS_BACKEND_URL=http://localhost:8000

# =============================================================================
# SECURITY (Production)
# =============================================================================

ENFORCE_AUTHENTICATION=false
JWT_SECRET_KEY=generate-with-openssl-rand-hex-32
RATE_LIMITING_ENABLED=true
CORS_ALLOWED_ORIGINS=*
AUDIT_LOGGING_ENABLED=true

# =============================================================================
# SENTRY (Error Monitoring & Performance)
# =============================================================================
# Create a project at: https://sentry.io
# Get DSN from: Project Settings > Client Keys (DSN)

SENTRY_DSN=https://your-public-key@o123456.ingest.sentry.io/project-id
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1
SENTRY_SEND_DEFAULT_PII=false
SENTRY_DEBUG=false

# =============================================================================
# LEGACY/OPTIONAL - Direct provider keys (not needed with OpenRouter)
# =============================================================================
# Only set these if you need direct provider access for specific use cases

# ANTHROPIC_API_KEY=sk-ant-...      # Direct Claude (Computer Use may have lower latency)
# OPENAI_API_KEY=sk-...             # Direct OpenAI
# GOOGLE_API_KEY=AIza...            # Direct Gemini
# GROQ_API_KEY=gsk_...              # Ultra-fast Llama (if needed)
